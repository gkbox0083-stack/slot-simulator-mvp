# v1.2 視覺語義聲明

## 設計定位

v1.2 的核心目標是實現 **Outcome → Pattern Resolver**，將數學結果（Outcome）與視覺呈現（Grid）解耦。

## v1.2 保證的事項 ✅

1. **數學正確性**
   - RTP 計算精確
   - Gap 統計正確
   - FSM 狀態轉換精確
   - Outcome 機率分布符合設定

2. **Pattern 合法性**
   - WIN 類型：盤面必定形成正確的連線
   - LOSS 類型：盤面不會意外形成連線
   - matchCount 與實際連線符號數量一致

3. **架構擴展性**
   - 支援任意 Grid 大小（3x3, 5x3, 5x4...）
   - 支援任意 Payline 定義
   - Resolver 與 Math Core 完全解耦

## v1.2 不保證的事項 ❌

1. **視覺可區分性**
   - 不保證：不同 Outcome 的盤面在視覺上可被人類區分
   - 範例：`NEAR_MISS` 與 `LOSS` 可能產生相同的盤面

2. **視覺自然度**
   - 不保證：盤面符合真實老虎機的視覺體驗
   - 範例：可能出現「整列重複」的情況（數學合法但視覺不自然）

3. **玩家體感**
   - 不保證：Near Miss 的「差一點」心理效果
   - 不保證：符號分布的「自然感」

## 為什麼這樣設計？

v1.2 採用**分層演進策略**：

```
v1.1: 固定 Pattern（一對一映射）
  ↓
v1.2: Pattern Resolver（數學正確性）← 我們在這裡
  ↓
v1.3: Visual Constraint（視覺可讀性）← 下一步
  ↓
v1.4: Player Experience（玩家體感）
```

這種設計確保：
- 每個版本只解決一個核心問題
- 不會為了「看起來像遊戲」而污染數學層
- 架構保持清晰可維護

## 使用建議

### 對於數學驗證

✅ **適用場景**：
- RTP 驗證
- Hit Rate 分析
- Gap 統計
- Outcome 分布檢查

v1.2 可以完全信任地用於這些目的。

### 對於視覺驗證

⚠️ **限制**：
- 盤面可能視覺重複
- Near Miss 與 LOSS 可能無法區分
- 不適合直接展示給玩家

💡 **建議**：
- 等待 v1.3 的視覺優化
- 或僅使用 CSV 數據進行分析
- 不要基於「前 20 次盤面」做最終判斷

## 常見誤解澄清

### Q: 為什麼盤面會整列重複？
**A**: v1.2 的 Resolver 目前優先確保「數學正確」，尚未實作「視覺去重」邏輯。這不影響 RTP 計算，但確實影響視覺體驗。

### Q: NEAR_MISS 和 LOSS 看起來一樣，是 Bug 嗎？
**A**: 不是 Bug。在數學定義上，兩者都是 `payoutMultiplier = 0` 的結果。差異在於「設計意圖」（心理效果），而非數學條件。v1.2 的 Resolver 不處理這種語義差異。

### Q: 我該如何驗證設計是否正確？
**A**: 
1. 查看 RTP、Hit Rate、Gap 等統計數據（完全可信）
2. 查看 Outcome 分布表格（完全可信）
3. 不要過度依賴「前 20 次盤面」的視覺呈現

## 下一步：v1.3 規劃

v1.3 將引入 **Visual Constraint Layer**，改善：
1. 盤面符號隨機化（避免整列重複）
2. Near Miss 視覺特徵（故意「差一點」）
3. 符號分布自然度（符合玩家直覺）

這些改進將**不修改 Math Core**，僅在 Resolver 層加入視覺約束。

---

**v1.2 是「數學正確的 Pattern Resolver」，不是「可給玩家看的老虎機」。**

